# Lab: Tiered Storage

### Aim: see various cache criteria, what happens in case space has/doesn't have a mirror,deleting/not deleting pu metadata before new deployment, ZooKeeper storage.
  

# Instructions

1. Start the app:

    go to gs-home/bin

    run:  ./gs.sh host run-agent --auto --gsc=4

2. Build space module
3. Go to ops-ui localhost:8090
4. Deploy space service 2,1 (number of partitions 2, High availability checked) context property:pu.autogenerated-instance-sla true.(Advanced)
5. Run feeder from dev environment
6. See the objects and query them using ops-ui, Run Reader to see total vs memory counts 
7. Undeploy the space service (drain attempt 10 sec timeout )
8. Go to Rest api page localhost:8090/v2
9. Get Undeployed list
10. Run ZooKeeperAttributeStoreReader to see what kept in ZK storage.
11. Redploy the space service. Examine primary log, See objects inside the space (see what is missing- Doc2)
12. Undeploy the space service
13. Connect locally to sqlite instance run queries directly on that database
14. Go to Rest api page localhost:8090/v2, Delete pu metadata
15. Run ZooKeeperAttributeStoreReader to see that data was cleared


